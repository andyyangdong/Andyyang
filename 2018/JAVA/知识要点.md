知识要点
===


ioc:

 · 构建 BeanFactory，以便于产生所需的“演员”

 · 注册可能感兴趣的事件

 · 创建 Bean 实例对象

 · 触发被监听的事件

 · 

我们把 Ioc 容器比作一个箱子，这个箱子里有若干个球的模子，可以用这些模子来造很多种不同的球，还有一个造这些球模的机器，这个机器可以产生球模。那么他们的对应关系就是 BeanFactory 就是那个造球模的机器，球模就是 Bean，而球模造出来的球就是 Bean 的实例。那前面所说的几个扩展点又在什么地方呢？ BeanFactoryPostProcessor 对应到当造球模被造出来时，你将有机会可以对其做出设当的修正，也就是他可以帮你修改球模。而 InitializingBean 和 DisposableBean 是在球模造球的开始和结束阶段，你可以完成一些预备和扫尾工作。BeanPostProcessor 就可以让你对球模造出来的球做出适当的修正。最后还有一个 FactoryBean，它可是一个神奇的球模。这个球模不是预先就定型了，而是由你来给他确定它的形状，既然你可以确定这个球模型的形状，当然他造出来的球肯定就是你想要的球了，这样在这个箱子里尼可以发现所有你想要的球

IoC(Inverse of Controller,控制反转)？

控制权：A调用B组件，可以说成A组件拥有控制权。控制权可以代指对象的创建、初始化、销毁等操作。

控制反转：是将控制权转移，转移给第三方（Spring容器），当需要改变对象关系时，只需要修改Spring容器注入配置即可。

IoC是一种思想，Spring框架通过DI（依赖注入:setter注入和构造方法注入）技术实现了控制反转。

什么是AOP?

Aspect Oriented Programming 面向方面编程。

面向方面编程侧重点是关注方面组件（共通处理部分），可以将方面组件作用到某一批目标对象的方法上。

FactoryBean和BeanFactor

 1 BeanFactory是个Factory，也就是 IOC 容器或对象工厂，所有的 Bean 都是由 BeanFactory( 也就是 IOC 容器 ) 来进行管理。

 2 FactoryBean是一个能生产或者修饰生成对象的工厂Bean，可以在IOC容器中被管理，所以它并不是一个简单的Bean。当使用容器中factory bean的时候，该容器不会返回factory bean本身，而是返回其生成的对象。



## Spring MVC 本质是一个Servlet

 ▪ 加载配置文件

 ▪ 扫描配置包

 ▪ 利用反射机制，实例化存放IOC容器

 ▪ 初始化 HandlerMapping

 ▪ 异常拦截

 ▪ 处理参数

 ▪ HandlerMapping 通过url反射调用方

Spring MVC 和 struts2 对比

### servlet 是如何运行的？

 当用户向浏览器地址栏输入http://ip:port/helloweb/sayHello?name=zs
1) 浏览器使用ip：port（端口号）连接服务器
2) 浏览器将请求数据按照http 协议打成一个数据包（请求数据包）发送给服务器
请求数据包的内容包含了请求资源路径(/helloweb/sayHello?name=zs)，
另外，在请求数据包当中，还会包含浏览器自动生成的一些信息。
3) 服务器创建两个对象：请求对象（Request）和响应对象（Response）
服务器解析请求数据包，将解析之后的数据存放到请求对象里面，方便servlet读取请求数据(因为servlet不用解析请求数据包，如果要解析，需要理解http 协议)。
请求对象是HttpServletRequest接口的一个实现。
响应对象是HttpServletResponse 接口的一个实现，响应对象由于存放servlet处理的结果。
4) 依据请求资源路径找到相应的servlet配置，通过反射创建servlet实例。然后调用其service()
方法。
在调用service()方法时，会将事先创建好的请求对象(request)和响应对象(response)作为参数进行传递。在servlet内部，可以通过request获得请求数据，戒者通过response 设置响应数据。
5) 服务器从response 中获取数据，按照 http 协议打成一个数据包(响应数据包),发送给浏览器。
6) 浏览器会解析响应数据包，取出相应的数据，生成相应的界面。



SpringMVC集成了Ajax，使用非常方便，只需一个注解@ResponseBody就可以实现，然后直接返回响应文本即可，而Struts2拦截器集成了Ajax，在Action中处理时一般必须安装插件或者自己写代码集成进去，使用起来也相对不方便
